<form action="/groups/<%= group._id %>?_method=PUT" method="post">

  <label for="name">Group name</label>
  <input type="text" name="name" id="name">

  <label for="desc">Description</label>
  <textarea name="desc" id="desc" cols="30" rows="2"></textarea>

  <div id="invites">
    <h3>Invite people:</h3>

    <label for="invite0">Email</label>
    <input type="email" name="invites[0][email]" id="invite0">

  </div>

  <span class="button" id="add-invite">Add another email</span>

  <label for="message">Add a message to your invite</label>
  <textarea name="message" id="message" cols="30" rows="2"></textarea>

  <button type="submit">Lets go</button>
</form>

<script>

  let invites = document.getElementById('invites')
  let addInviteBtn = document.getElementById('add-invite')
  let numInvites = 0
  addInviteBtn.addEventListener('click',()=>{
    numInvites++
    let newInviteElem = document.createElement('div')
  
    newInviteElem.innerHTML = 
    `<label for="invite${numInvites}">Email</label>
    <input type="email" name="invites[${numInvites}][email]" id="invite${numInvites}">`

    invites.appendChild(newInviteElem)
  })
  addInviteBtn.click()

  // Validate email list
  // let emailList = document.getElementById('invites')
  // emailList.addEventListener('change',validateEmails)
  // function validateEmails(e){
  //   let emails = e.target.value.replace(/\s/g,'').split(",");
  //   let valid = true;
  //   let regex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

  //   for (let i = 0; i < emails.length; i++) {
  //     if( emails[i] == "" || ! regex.test(emails[i])){
  //       valid = false
  //       break
  //     }
  //   }
  //   console.log('valid',valid)
  // }
</script>